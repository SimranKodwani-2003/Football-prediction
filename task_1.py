# -*- coding: utf-8 -*-
"""Task 1

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1tK02ZVH_GvB-wZm6VHQMXI-ETtybkn8j

1. Use Seaborn to investigate the data and present your findings
"""

# Commented out IPython magic to ensure Python compatibility.
import pandas as pd
import matplotlib.pyplot as plt
# %matplotlib inline

data = pd.read_csv("/content/Predicting the Price of a Football Player.csv")

type(data)

data

data['fpl_sel'] = data['fpl_sel'].replace('%','',regex=True).astype('float')/10

output_var = 'market_value'

import numpy as np
X = data[data.columns[~data.columns.isin([output_var])]]
y = data[[output_var]]

from sklearn.model_selection import train_test_split
np.random.seed(37) # Set seed
x_train, x_test = train_test_split(X, test_size = 0.25)

## dont using iloc as we have projected from data
y_train = y.loc[x_train.index.values]
y_test = y.loc[x_test.index.values]
x_train = X.loc[x_train.index.values, :]
x_test = X.loc[x_test.index.values, :]

concat_train_data = pd.concat([x_train,y_train],axis=1)

concat_train_data.describe()

concat_train_data.corr()[output_var].sort_values()

concat_train_data.dtypes

import seaborn as sns
sns.boxplot(y='position',x=output_var,data=concat_train_data,orient='h')
plt.xlabel("Market Value")
plt.show()

sns.boxplot(y='position',x='market_value',data=concat_train_data,hue='new_signing',orient='h')
plt.xlabel("Market Value")
plt.show()

encoded_data = pd.get_dummies(concat_train_data, columns=["new_foreign","big_club","new_signing"],drop_first=True)

encoded_data.head()

concat_train_data.corr()[output_var].sort_values()

corr = concat_train_data.corr()
import seaborn as sns
import numpy as np
sns.heatmap(corr, mask=np.zeros_like(corr, dtype=np.bool), cmap=sns.diverging_palette(240,10,as_cmap=True),
            square=True)

corr

import seaborn as sns
sns.pairplot(encoded_data,height=2.5)

encoded_data.head()